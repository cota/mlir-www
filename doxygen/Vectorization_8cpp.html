<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/Linalg/Transforms/Vectorization.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">13.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_8edb792440615361a0811a7329611599.html">Linalg</a></li><li class="navelem"><a class="el" href="dir_7e2f808e77498894ca0efbd745da2201.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Vectorization.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="DependenceAnalysis_8h_source.html">mlir/Dialect/Linalg/Analysis/DependenceAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LinalgOps_8h_source.html">mlir/Dialect/Linalg/IR/LinalgOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Linalg_2Transforms_2Transforms_8h_source.html">mlir/Dialect/Linalg/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Linalg_2Utils_2Utils_8h_source.html">mlir/Dialect/Linalg/Utils/Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="StandardOps_2EDSC_2Intrinsics_8h_source.html">mlir/Dialect/StandardOps/EDSC/Intrinsics.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="StructuredOpsUtils_8h_source.html">mlir/Dialect/Utils/StructuredOpsUtils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Vector_2EDSC_2Intrinsics_8h_source.html">mlir/Dialect/Vector/EDSC/Intrinsics.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="VectorOps_8h_source.html">mlir/Dialect/Vector/VectorOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IR_2AffineExpr_8h_source.html">mlir/IR/AffineExpr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Matchers_8h_source.html">mlir/IR/Matchers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="PatternMatch_8h_source.html">mlir/IR/PatternMatch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="include_2mlir_2Pass_2Pass_8h_source.html">mlir/Pass/Pass.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LLVM_8h_source.html">mlir/Support/LLVM.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="RegionUtils_8h_source.html">mlir/Transforms/RegionUtils.h</a>&quot;</code><br />
<code>#include &quot;llvm/ADT/ScopeExit.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
<code>#include &quot;llvm/Support/raw_ostream.h&quot;</code><br />
<code>#include &lt;type_traits&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Vectorization.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="Vectorization_8cpp__incl.png" border="0" usemap="#lib_2Dialect_2Linalg_2Transforms_2Vectorization_8cpp" alt=""/></div>
<map name="lib_2Dialect_2Linalg_2Transforms_2Vectorization_8cpp" id="lib_2Dialect_2Linalg_2Transforms_2Vectorization_8cpp">
<area shape="rect" id="node2" href="DependenceAnalysis_8h.html" title="mlir/Dialect/Linalg\l/Analysis/DependenceAnalysis.h" alt="" coords="2826,273,3059,315"/>
<area shape="rect" id="node3" href="LinalgOps_8h.html" title="mlir/Dialect/Linalg\l/IR/LinalgOps.h" alt="" coords="1464,363,1605,404"/>
<area shape="rect" id="node14" href="StructuredOpsUtils_8h.html" title="mlir/Dialect/Utils\l/StructuredOpsUtils.h" alt="" coords="307,541,467,583"/>
<area shape="rect" id="node16" href="IR_2AffineExpr_8h.html" title="mlir/IR/AffineExpr.h" alt="" coords="392,720,539,747"/>
<area shape="rect" id="node17" href="LLVM_8h.html" title="mlir/Support/LLVM.h" alt="" coords="277,795,427,821"/>
<area shape="rect" id="node28" href="Dialect_2Linalg_2Transforms_2Transforms_8h.html" title="mlir/Dialect/Linalg\l/Transforms/Transforms.h" alt="" coords="1889,95,2076,136"/>
<area shape="rect" id="node29" href="Dialect_2Linalg_2Utils_2Utils_8h.html" title="mlir/Dialect/Linalg\l/Utils/Utils.h" alt="" coords="2221,184,2363,225"/>
<area shape="rect" id="node34" href="StandardOps_2EDSC_2Intrinsics_8h.html" title="mlir/Dialect/StandardOps\l/EDSC/Intrinsics.h" alt="" coords="2695,363,2881,404"/>
<area shape="rect" id="node38" href="VectorOps_8h.html" title="mlir/Dialect/Vector\l/VectorOps.h" alt="" coords="1051,541,1194,583"/>
<area shape="rect" id="node40" href="PatternMatch_8h.html" title="mlir/IR/PatternMatch.h" alt="" coords="2727,191,2894,218"/>
<area shape="rect" id="node44" href="Vector_2EDSC_2Intrinsics_8h.html" title="mlir/Dialect/Vector\l/EDSC/Intrinsics.h" alt="" coords="2590,95,2733,136"/>
<area shape="rect" id="node45" href="Matchers_8h.html" title="mlir/IR/Matchers.h" alt="" coords="1001,638,1141,665"/>
<area shape="rect" id="node46" href="include_2mlir_2Pass_2Pass_8h.html" title="mlir/Pass/Pass.h" alt="" coords="2757,102,2883,129"/>
<area shape="rect" id="node47" href="RegionUtils_8h.html" title="mlir/Transforms/RegionUtils.h" alt="" coords="2489,191,2703,218"/>
<area shape="rect" id="node6" href="IR_2Builders_8h.html" title="mlir/IR/Builders.h" alt="" coords="2597,720,2731,747"/>
<area shape="rect" id="node7" href="OpDefinition_8h.html" title="mlir/IR/OpDefinition.h" alt="" coords="1923,795,2085,821"/>
<area shape="rect" id="node4" href="LinalgTypes_8h.html" title="mlir/Dialect/Linalg\l/IR/LinalgTypes.h" alt="" coords="2163,452,2304,493"/>
<area shape="rect" id="node5" href="Ops_8h.html" title="mlir/Dialect/StandardOps\l/IR/Ops.h" alt="" coords="2066,541,2251,583"/>
<area shape="rect" id="node9" href="IR_2BuiltinTypes_8h.html" title="mlir/IR/BuiltinTypes.h" alt="" coords="1149,720,1309,747"/>
<area shape="rect" id="node10" href="Types_8h.html" title="mlir/IR/Types.h" alt="" coords="1037,795,1155,821"/>
<area shape="rect" id="node11" href="SideEffectInterfaces_8h.html" title="mlir/Interfaces/SideEffect\lInterfaces.h" alt="" coords="2304,631,2491,672"/>
<area shape="rect" id="node12" href="ViewLikeInterface_8h.html" title="mlir/Interfaces/ViewLike\lInterface.h" alt="" coords="1537,631,1717,672"/>
<area shape="rect" id="node15" href="IR_2AffineMap_8h.html" title="mlir/IR/AffineMap.h" alt="" coords="611,638,757,665"/>
<area shape="rect" id="node18" href="BlockAndValueMapping_8h.html" title="mlir/IR/BlockAndValueMapping.h" alt="" coords="1321,549,1554,575"/>
<area shape="rect" id="node19" href="BuiltinDialect_8h.html" title="mlir/IR/BuiltinDialect.h" alt="" coords="1699,459,1869,486"/>
<area shape="rect" id="node20" href="TypeUtilities_8h.html" title="mlir/IR/TypeUtilities.h" alt="" coords="1024,459,1187,486"/>
<area shape="rect" id="node22" href="CopyOpInterface_8h.html" title="mlir/Interfaces/CopyOpInterface.h" alt="" coords="1680,720,1923,747"/>
<area shape="rect" id="node23" href="InferTypeOpInterface_8h.html" title="mlir/Interfaces/InferType\lOpInterface.h" alt="" coords="1997,631,2179,672"/>
<area shape="rect" id="node24" href="LinalgInterfaces_8h.html" title="mlir/Dialect/Linalg\l/IR/LinalgInterfaces.h" alt="" coords="1262,452,1421,493"/>
<area shape="rect" id="node13" href="Dialect_2Tensor_2IR_2Tensor_8h.html" title="mlir/Dialect/Tensor\l/IR/Tensor.h" alt="" coords="2327,541,2471,583"/>
<area shape="rect" id="node39" href="Identifier_8h.html" title="mlir/IR/Identifier.h" alt="" coords="144,370,283,397"/>
<area shape="rect" id="node41" href="Bufferize_8h.html" title="mlir/Transforms/Bufferize.h" alt="" coords="2429,459,2627,486"/>
<area shape="rect" id="node30" href="Affine_2EDSC_2Intrinsics_8h.html" title="mlir/Dialect/Affine\l/EDSC/Intrinsics.h" alt="" coords="2330,273,2470,315"/>
<area shape="rect" id="node31" href="Dialect_2Linalg_2EDSC_2Builders_8h.html" title="mlir/Dialect/Linalg\l/EDSC/Builders.h" alt="" coords="1552,273,1693,315"/>
<area shape="rect" id="node32" href="MemRef_2EDSC_2Intrinsics_8h.html" title="mlir/Dialect/MemRef\l/EDSC/Intrinsics.h" alt="" coords="2495,273,2649,315"/>
<area shape="rect" id="node35" href="Dialect_2SCF_2SCF_8h.html" title="mlir/Dialect/SCF/SCF.h" alt="" coords="2875,549,3039,575"/>
<area shape="rect" id="node33" href="Dialect_2StandardOps_2EDSC_2Builders_8h.html" title="mlir/Dialect/StandardOps\l/EDSC/Builders.h" alt="" coords="2702,452,2887,493"/>
</map>
</div>
</div>
<p><a href="Vectorization_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structVectorizationResult.html">VectorizationResult</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;linalg-vectorization&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a80cea536835eb713664fff0ab1557d6e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a80cea536835eb713664fff0ab1557d6e">CustomVectorizationHook</a> = std::function&lt; <a class="el" href="structVectorizationResult.html">VectorizationResult</a>(<a class="el" href="classmlir_1_1Operation.html">Operation</a> *, const <a class="el" href="classmlir_1_1BlockAndValueMapping.html">BlockAndValueMapping</a> &amp;)&gt;</td></tr>
<tr class="separator:a80cea536835eb713664fff0ab1557d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcb67ae948d0d31d37d6addbcfa343b"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a0fcb67ae948d0d31d37d6addbcfa343b">ConvOpConst</a> = <a class="el" href="classmlir_1_1linalg_1_1ConvOpVectorization.html">ConvOpVectorization</a>&lt; ConvWOp, 1 &gt;</td></tr>
<tr class="separator:a0fcb67ae948d0d31d37d6addbcfa343b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad138b2ed2839f1b552ed674585cacad3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ad138b2ed2839f1b552ed674585cacad3">VectorizationStatus</a> { <a class="el" href="Vectorization_8cpp.html#ad138b2ed2839f1b552ed674585cacad3a6fb01c5d76aa5b0825fd3c52dc5f3661">Failure</a> = 0, 
<a class="el" href="Vectorization_8cpp.html#ad138b2ed2839f1b552ed674585cacad3af97b2f48071b6944652bfffb71351c8f">NoReplace</a>, 
<a class="el" href="Vectorization_8cpp.html#ad138b2ed2839f1b552ed674585cacad3aaaf8d13847a58092eb64f52b2bed99c6">NewOp</a>
 }<tr class="memdesc:ad138b2ed2839f1b552ed674585cacad3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper data structure to represent the result of vectorization.  <a href="Vectorization_8cpp.html#ad138b2ed2839f1b552ed674585cacad3">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ad138b2ed2839f1b552ed674585cacad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab37ae3178304b744d6b0249a60a6e7a3"><td class="memTemplParams" colspan="2">template&lt;typename OpType &gt; </td></tr>
<tr class="memitem:ab37ae3178304b744d6b0249a60a6e7a3"><td class="memTemplItemLeft" align="right" valign="top">static OpType&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ab37ae3178304b744d6b0249a60a6e7a3">getSingleOpOfType</a> (<a class="el" href="classmlir_1_1Block.html">Block</a> &amp;block)</td></tr>
<tr class="memdesc:ab37ae3178304b744d6b0249a60a6e7a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the unique instance of OpType in <code>block</code> if it is indeed unique.  <a href="#ab37ae3178304b744d6b0249a60a6e7a3">More...</a><br /></td></tr>
<tr class="separator:ab37ae3178304b744d6b0249a60a6e7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6de0826c5c4d9b00cdb271be9eda5196"><td class="memItemLeft" align="right" valign="top">static VectorType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a6de0826c5c4d9b00cdb271be9eda5196">extractVectorTypeFromShapedValue</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> v)</td></tr>
<tr class="memdesc:a6de0826c5c4d9b00cdb271be9eda5196"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a vector type of the same shape and element type as the (assumed) ShapedType of <code>v</code>.  <a href="#a6de0826c5c4d9b00cdb271be9eda5196">More...</a><br /></td></tr>
<tr class="separator:a6de0826c5c4d9b00cdb271be9eda5196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69ed65fed6656d5d81da6cbde09d4e5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a69ed65fed6656d5d81da6cbde09d4e5c">buildVectorRead</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1Value.html">Value</a> source, VectorType <a class="el" href="Sparsification_8cpp.html#a62b76ab4ed8e0cd05bb69c4c331e0fff">vectorType</a>, <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> map)</td></tr>
<tr class="memdesc:a69ed65fed6656d5d81da6cbde09d4e5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a vector.transfer_read from <code>source</code> at indices set to all <code>0</code>.  <a href="#a69ed65fed6656d5d81da6cbde09d4e5c">More...</a><br /></td></tr>
<tr class="separator:a69ed65fed6656d5d81da6cbde09d4e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab28e0c338badbc35ad604d00220953da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ab28e0c338badbc35ad604d00220953da">buildVectorWrite</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1Value.html">Value</a> value, <a class="el" href="classmlir_1_1Value.html">Value</a> dest)</td></tr>
<tr class="memdesc:ab28e0c338badbc35ad604d00220953da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a vector.transfer_write of <code>value</code> into <code>dest</code> at indices set to all <code>0</code>.  <a href="#ab28e0c338badbc35ad604d00220953da">More...</a><br /></td></tr>
<tr class="separator:ab28e0c338badbc35ad604d00220953da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e8afe3590923c7f2028a21af22f965"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a55e8afe3590923c7f2028a21af22f965">broadcastIfNeeded</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1Value.html">Value</a> value, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt; shape)</td></tr>
<tr class="memdesc:a55e8afe3590923c7f2028a21af22f965"><td class="mdescLeft">&#160;</td><td class="mdescRight">If value of assumed VectorType has a shape different than <code>shape</code>, buil and return a new vector.broadcast to <code>shape</code>.  <a href="#a55e8afe3590923c7f2028a21af22f965">More...</a><br /></td></tr>
<tr class="separator:a55e8afe3590923c7f2028a21af22f965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae980681ab3248e1e537a0d5a5163afaf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structVectorizationResult.html">VectorizationResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ae980681ab3248e1e537a0d5a5163afaf">vectorizeLinalgYield</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, const <a class="el" href="classmlir_1_1BlockAndValueMapping.html">BlockAndValueMapping</a> &amp;bvm, LinalgOp linalgOp, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;newResults)</td></tr>
<tr class="memdesc:ae980681ab3248e1e537a0d5a5163afaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to vectorize the terminator of a <code>linalgOp</code>.  <a href="#ae980681ab3248e1e537a0d5a5163afaf">More...</a><br /></td></tr>
<tr class="separator:ae980681ab3248e1e537a0d5a5163afaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a69e820c1eb2a75eae1d9e9e0d7065"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structVectorizationResult.html">VectorizationResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a43a69e820c1eb2a75eae1d9e9e0d7065">vectorizeOneOp</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, const <a class="el" href="classmlir_1_1BlockAndValueMapping.html">BlockAndValueMapping</a> &amp;bvm, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="Vectorization_8cpp.html#a80cea536835eb713664fff0ab1557d6e">CustomVectorizationHook</a> &gt; customVectorizationHooks)</td></tr>
<tr class="memdesc:a43a69e820c1eb2a75eae1d9e9e0d7065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic vectorization for a single operation <code>op</code>, given already vectorized operands carried by <code>bvm</code>.  <a href="#a43a69e820c1eb2a75eae1d9e9e0d7065">More...</a><br /></td></tr>
<tr class="separator:a43a69e820c1eb2a75eae1d9e9e0d7065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab0311cb4a3619f740f979c97fb95899"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#aab0311cb4a3619f740f979c97fb95899">hasOnlyScalarElementwiseOp</a> (<a class="el" href="classmlir_1_1Region.html">Region</a> &amp;r)</td></tr>
<tr class="memdesc:aab0311cb4a3619f740f979c97fb95899"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect whether <code>r</code> has only <a class="el" href="classConstantOp.html">ConstantOp</a>, ElementwiseMappable and YieldOp.  <a href="#aab0311cb4a3619f740f979c97fb95899">More...</a><br /></td></tr>
<tr class="separator:aab0311cb4a3619f740f979c97fb95899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4cc9c0c9d74817a5647edf6ef4c7fe6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#af4cc9c0c9d74817a5647edf6ef4c7fe6">isElementwise</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op)</td></tr>
<tr class="separator:af4cc9c0c9d74817a5647edf6ef4c7fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3352aa351e81e86e7b1f90c3f1be56a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ae3352aa351e81e86e7b1f90c3f1be56a">getTransferReadMap</a> (LinalgOp linalgOp, <a class="el" href="classunsigned.html">unsigned</a> argIndex)</td></tr>
<tr class="separator:ae3352aa351e81e86e7b1f90c3f1be56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4561217b202f6366ed44b59980246881"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a4561217b202f6366ed44b59980246881">vectorizeAsLinalgGeneric</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, LinalgOp linalgOp, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;newResults, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="Vectorization_8cpp.html#a80cea536835eb713664fff0ab1557d6e">CustomVectorizationHook</a> &gt; customVectorizationHooks={})</td></tr>
<tr class="memdesc:a4561217b202f6366ed44b59980246881"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic vectorization function that rewrites the body of a <code>linalgOp</code> into vector form.  <a href="#a4561217b202f6366ed44b59980246881">More...</a><br /></td></tr>
<tr class="separator:a4561217b202f6366ed44b59980246881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab969c04ac81e03bdc07407d37d03f43b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ab969c04ac81e03bdc07407d37d03f43b">vectorizeContraction</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, LinalgOp linalgOp, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;newResults)</td></tr>
<tr class="separator:ab969c04ac81e03bdc07407d37d03f43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac42cf8cc3f7be0317a80d15194d05069"><td class="memTemplParams" colspan="2">template&lt;typename ConvOp , unsigned N&gt; </td></tr>
<tr class="memitem:ac42cf8cc3f7be0317a80d15194d05069"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classvoid.html">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#ac42cf8cc3f7be0317a80d15194d05069">populateVectorizationPatterns</a> (<a class="el" href="classmlir_1_1RewritePatternSet.html">RewritePatternSet</a> &amp;tilingPatterns, <a class="el" href="classmlir_1_1RewritePatternSet.html">RewritePatternSet</a> &amp;promotionPatterns, <a class="el" href="classmlir_1_1RewritePatternSet.html">RewritePatternSet</a> &amp;vectorizationPatterns, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt; tileSizes)</td></tr>
<tr class="memdesc:ac42cf8cc3f7be0317a80d15194d05069"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts tiling, promotion and vectorization pattern for ConvOp conversion into corresponding pattern lists.  <a href="#ac42cf8cc3f7be0317a80d15194d05069">More...</a><br /></td></tr>
<tr class="separator:ac42cf8cc3f7be0317a80d15194d05069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69be050ec61bb7c731b8666ca80f832f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a69be050ec61bb7c731b8666ca80f832f">mayExistInterleavedUses</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *firstOp, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *secondOp, <a class="el" href="classmlir_1_1ValueRange.html">ValueRange</a> values)</td></tr>
<tr class="memdesc:a69be050ec61bb7c731b8666ca80f832f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether there is any interleaved use of any <code>values</code> between <code>firstOp</code> and <code>secondOp</code>.  <a href="#a69be050ec61bb7c731b8666ca80f832f">More...</a><br /></td></tr>
<tr class="separator:a69be050ec61bb7c731b8666ca80f832f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035a7bd3b44d215db6d50b32318822c0"><td class="memItemLeft" align="right" valign="top">static memref::SubViewOp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vectorization_8cpp.html#a035a7bd3b44d215db6d50b32318822c0">getSubViewUseIfUnique</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> v)</td></tr>
<tr class="memdesc:a035a7bd3b44d215db6d50b32318822c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the unique subview use of <code>v</code> if it is indeed unique, null otherwise.  <a href="#a035a7bd3b44d215db6d50b32318822c0">More...</a><br /></td></tr>
<tr class="separator:a035a7bd3b44d215db6d50b32318822c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;linalg-vectorization&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00039">39</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00106">buildVectorWrite()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00691">mlir::linalg::LinalgCopyVTRForwardingPattern::matchAndRewrite()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00648">mayExistInterleavedUses()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00364">vectorizeContraction()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00411">mlir::linalg::vectorizeLinalgOp()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00190">vectorizeOneOp()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a0fcb67ae948d0d31d37d6addbcfa343b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fcb67ae948d0d31d37d6addbcfa343b">&#9670;&nbsp;</a></span>ConvOpConst</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="Vectorization_8cpp.html#a0fcb67ae948d0d31d37d6addbcfa343b">ConvOpConst</a> =  <a class="el" href="classmlir_1_1linalg_1_1ConvOpVectorization.html">ConvOpVectorization</a>&lt;ConvWOp, 1&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00559">559</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

</div>
</div>
<a id="a80cea536835eb713664fff0ab1557d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80cea536835eb713664fff0ab1557d6e">&#9670;&nbsp;</a></span>CustomVectorizationHook</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="Vectorization_8cpp.html#a80cea536835eb713664fff0ab1557d6e">CustomVectorizationHook</a> =  std::function&lt;<a class="el" href="structVectorizationResult.html">VectorizationResult</a>( <a class="el" href="classmlir_1_1Operation.html">Operation</a> *, const <a class="el" href="classmlir_1_1BlockAndValueMapping.html">BlockAndValueMapping</a> &amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00142">142</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ad138b2ed2839f1b552ed674585cacad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad138b2ed2839f1b552ed674585cacad3">&#9670;&nbsp;</a></span>VectorizationStatus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="Vectorization_8cpp.html#ad138b2ed2839f1b552ed674585cacad3">VectorizationStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper data structure to represent the result of vectorization. </p>
<p>In certain specific cases, like terminators, we do not want to propagate/ </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad138b2ed2839f1b552ed674585cacad3a6fb01c5d76aa5b0825fd3c52dc5f3661"></a>Failure&#160;</td><td class="fielddoc"><p>Op failed to vectorize. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad138b2ed2839f1b552ed674585cacad3af97b2f48071b6944652bfffb71351c8f"></a>NoReplace&#160;</td><td class="fielddoc"><p>Op vectorized and custom function took care of replacement logic. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad138b2ed2839f1b552ed674585cacad3aaaf8d13847a58092eb64f52b2bed99c6"></a>NewOp&#160;</td><td class="fielddoc"><p>Op vectorized into a new Op whose results will replace original Op's results. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00059">59</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a55e8afe3590923c7f2028a21af22f965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55e8afe3590923c7f2028a21af22f965">&#9670;&nbsp;</a></span>broadcastIfNeeded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Value.html">Value</a> broadcastIfNeeded </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>shape</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If value of assumed VectorType has a shape different than <code>shape</code>, buil and return a new vector.broadcast to <code>shape</code>. </p>
<p>Otherwise, just return value. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00127">127</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Builders_8h_source.html#l00392">mlir::OpBuilder::create()</a>, <a class="el" href="Types_8h_source.html#l00236">mlir::Type::dyn_cast()</a>, <a class="el" href="IR_2Builders_8h_source.html#l00361">mlir::OpBuilder::getInsertionPoint()</a>, and <a class="el" href="Value_8h_source.html#l00113">mlir::Value::getType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00190">vectorizeOneOp()</a>.</p>

</div>
</div>
<a id="a69ed65fed6656d5d81da6cbde09d4e5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69ed65fed6656d5d81da6cbde09d4e5c">&#9670;&nbsp;</a></span>buildVectorRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Value.html">Value</a> buildVectorRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorType&#160;</td>
          <td class="paramname"><em>vectorType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a vector.transfer_read from <code>source</code> at indices set to all <code>0</code>. </p>
<p>If source has rank zero, build an memref.load. Return the produced value. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00090">90</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Types_8h_source.html#l00242">mlir::Type::cast()</a>, and <a class="el" href="Value_8h_source.html#l00113">mlir::Value::getType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>.</p>

</div>
</div>
<a id="ab28e0c338badbc35ad604d00220953da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab28e0c338badbc35ad604d00220953da">&#9670;&nbsp;</a></span>buildVectorWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Value.html">Value</a> buildVectorWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a vector.transfer_write of <code>value</code> into <code>dest</code> at indices set to all <code>0</code>. </p>
<p>If <code>dest</code> has null rank, build an memref.store. Return the produced value or null if no value is produced. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00106">106</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Types_8h_source.html#l00242">mlir::Type::cast()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00039">DEBUG_TYPE</a>, <a class="el" href="Vectorization_8cpp_source.html#l00080">extractVectorTypeFromShapedValue()</a>, <a class="el" href="Operation_8h_source.html#l00284">mlir::Operation::getResult()</a>, <a class="el" href="Operation_8h_source.html#l00292">mlir::Operation::getResults()</a>, <a class="el" href="Value_8h_source.html#l00113">mlir::Value::getType()</a>, and <a class="el" href="Sparsification_8cpp_source.html#l00618">vectorType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00152">vectorizeLinalgYield()</a>.</p>

</div>
</div>
<a id="a6de0826c5c4d9b00cdb271be9eda5196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6de0826c5c4d9b00cdb271be9eda5196">&#9670;&nbsp;</a></span>extractVectorTypeFromShapedValue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VectorType extractVectorTypeFromShapedValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a vector type of the same shape and element type as the (assumed) ShapedType of <code>v</code>. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00080">80</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Types_8h_source.html#l00242">mlir::Type::cast()</a>, and <a class="el" href="Value_8h_source.html#l00113">mlir::Value::getType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00106">buildVectorWrite()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00433">mlir::linalg::PadTensorOpVectorizationPattern::matchAndRewrite()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>.</p>

</div>
</div>
<a id="ab37ae3178304b744d6b0249a60a6e7a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab37ae3178304b744d6b0249a60a6e7a3">&#9670;&nbsp;</a></span>getSingleOpOfType()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename OpType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static OpType getSingleOpOfType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Block.html">Block</a> &amp;&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the unique instance of OpType in <code>block</code> if it is indeed unique. </p>
<p>Return null if none or more than 1 instances exist. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00044">44</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Visitors_8h_source.html#l00051">mlir::WalkResult::advance()</a>, <a class="el" href="Visitors_8h_source.html#l00050">mlir::WalkResult::interrupt()</a>, and <a class="el" href="Block_8h_source.html#l00267">mlir::Block::walk()</a>.</p>

</div>
</div>
<a id="a035a7bd3b44d215db6d50b32318822c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a035a7bd3b44d215db6d50b32318822c0">&#9670;&nbsp;</a></span>getSubViewUseIfUnique()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static memref::SubViewOp getSubViewUseIfUnique </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the unique subview use of <code>v</code> if it is indeed unique, null otherwise. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00677">677</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Value_8h_source.html#l00188">mlir::Value::getUses()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00691">mlir::linalg::LinalgCopyVTRForwardingPattern::matchAndRewrite()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00771">mlir::linalg::LinalgCopyVTWForwardingPattern::matchAndRewrite()</a>.</p>

</div>
</div>
<a id="ae3352aa351e81e86e7b1f90c3f1be56a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3352aa351e81e86e7b1f90c3f1be56a">&#9670;&nbsp;</a></span>getTransferReadMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> getTransferReadMap </td>
          <td>(</td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classunsigned.html">unsigned</a>&#160;</td>
          <td class="paramname"><em>argIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00277">277</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="MLIRContext_8cpp_source.html#l00956">mlir::AffineMap::get()</a>, <a class="el" href="IR_2AffineExpr_8cpp_source.html#l00507">mlir::getAffineConstantExpr()</a>, <a class="el" href="IR_2AffineExpr_8cpp_source.html#l00482">mlir::getAffineDimExpr()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00268">mlir::AffineMap::getContext()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00321">mlir::AffineMap::getDimPosition()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00307">mlir::AffineMap::getNumInputs()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00303">mlir::AffineMap::getNumResults()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>.</p>

</div>
</div>
<a id="aab0311cb4a3619f740f979c97fb95899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab0311cb4a3619f740f979c97fb95899">&#9670;&nbsp;</a></span>hasOnlyScalarElementwiseOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasOnlyScalarElementwiseOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Region.html">Region</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detect whether <code>r</code> has only <a class="el" href="classConstantOp.html">ConstantOp</a>, ElementwiseMappable and YieldOp. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00245">245</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Region_8h_source.html#l00065">mlir::Region::front()</a>, and <a class="el" href="Operation_8cpp_source.html#l01107">mlir::OpTrait::hasElementwiseMappableTraits()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00259">isElementwise()</a>.</p>

</div>
</div>
<a id="af4cc9c0c9d74817a5647edf6ef4c7fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4cc9c0c9d74817a5647edf6ef4c7fe6">&#9670;&nbsp;</a></span>isElementwise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isElementwise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00259">259</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Vectorization_8cpp_source.html#l00245">hasOnlyScalarElementwiseOp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00411">mlir::linalg::vectorizeLinalgOp()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00396">mlir::linalg::vectorizeLinalgOpPrecondition()</a>.</p>

</div>
</div>
<a id="a69be050ec61bb7c731b8666ca80f832f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69be050ec61bb7c731b8666ca80f832f">&#9670;&nbsp;</a></span>mayExistInterleavedUses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mayExistInterleavedUses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>firstOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>secondOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1ValueRange.html">ValueRange</a>&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether there is any interleaved use of any <code>values</code> between <code>firstOp</code> and <code>secondOp</code>. </p>
<p>Conservatively return <code>true</code> if any op or value is in a different block. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00648">648</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Vectorization_8cpp_source.html#l00039">DEBUG_TYPE</a>, <a class="el" href="Operation_8h_source.html#l00096">mlir::Operation::getBlock()</a>, and <a class="el" href="Operation_8cpp_source.html#l00333">mlir::Operation::isBeforeInBlock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00691">mlir::linalg::LinalgCopyVTRForwardingPattern::matchAndRewrite()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00771">mlir::linalg::LinalgCopyVTWForwardingPattern::matchAndRewrite()</a>.</p>

</div>
</div>
<a id="ac42cf8cc3f7be0317a80d15194d05069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac42cf8cc3f7be0317a80d15194d05069">&#9670;&nbsp;</a></span>populateVectorizationPatterns()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ConvOp , unsigned N&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classvoid.html">void</a> populateVectorizationPatterns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewritePatternSet.html">RewritePatternSet</a> &amp;&#160;</td>
          <td class="paramname"><em>tilingPatterns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewritePatternSet.html">RewritePatternSet</a> &amp;&#160;</td>
          <td class="paramname"><em>promotionPatterns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewritePatternSet.html">RewritePatternSet</a> &amp;&#160;</td>
          <td class="paramname"><em>vectorizationPatterns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>tileSizes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts tiling, promotion and vectorization pattern for ConvOp conversion into corresponding pattern lists. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00564">564</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="PatternMatch_8h_source.html#l00860">mlir::RewritePatternSet::add()</a>, <a class="el" href="MLIRContext_8cpp_source.html#l00748">mlir::Identifier::get()</a>, <a class="el" href="PatternMatch_8h_source.html#l00836">mlir::RewritePatternSet::getContext()</a>, <a class="el" href="Dialect_2Linalg_2Transforms_2Transforms_8h_source.html#l00458">mlir::linalg::LinalgTilingOptions::setTileSizes()</a>, and <a class="el" href="Dialect_2Linalg_2Transforms_2Transforms_8h_source.html#l00255">mlir::linalg::LinalgPromotionOptions::setUseFullTileBuffersByDefault()</a>.</p>

</div>
</div>
<a id="a4561217b202f6366ed44b59980246881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4561217b202f6366ed44b59980246881">&#9670;&nbsp;</a></span>vectorizeAsLinalgGeneric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> vectorizeAsLinalgGeneric </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>newResults</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="Vectorization_8cpp.html#a80cea536835eb713664fff0ab1557d6e">CustomVectorizationHook</a> &gt;&#160;</td>
          <td class="paramname"><em>customVectorizationHooks</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic vectorization function that rewrites the body of a <code>linalgOp</code> into vector form. </p>
<p>Generic vectorization proceeds as follows:</p><ol type="1">
<li>Verify the <code>linalgOp</code> has one non-empty region.</li>
<li>Values defined above the region are mapped to themselves and will be broadcasted on a per-need basis by their consumers.</li>
<li>Each region argument is vectorized into a vector.transfer_read (or 0-d load). TODO: Reuse opportunities for RAR dependencies.</li>
<li>Register CustomVectorizationHook for YieldOp to capture the results.</li>
<li>Iteratively call vectorizeOneOp on the region operations. </li>
</ol>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00299">299</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Vectorization_8cpp_source.html#l00090">buildVectorRead()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00039">DEBUG_TYPE</a>, <a class="el" href="Vectorization_8cpp_source.html#l00080">extractVectorTypeFromShapedValue()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00061">Failure</a>, <a class="el" href="LogicalResult_8h_source.html#l00062">mlir::failure()</a>, <a class="el" href="Operation_8h_source.html#l00292">mlir::Operation::getResults()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00277">getTransferReadMap()</a>, <a class="el" href="RegionUtils_8cpp_source.html#l00059">mlir::getUsedValuesDefinedAbove()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00259">isElementwise()</a>, <a class="el" href="BlockAndValueMapping_8h_source.html#l00030">mlir::BlockAndValueMapping::map()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00066">NewOp</a>, <a class="el" href="Vectorization_8cpp_source.html#l00075">VectorizationResult::newOp</a>, <a class="el" href="Vectorization_8cpp_source.html#l00072">VectorizationResult::status</a>, <a class="el" href="LogicalResult_8h_source.html#l00056">mlir::success()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00152">vectorizeLinalgYield()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00190">vectorizeOneOp()</a>, and <a class="el" href="Sparsification_8cpp_source.html#l00618">vectorType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00364">vectorizeContraction()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00411">mlir::linalg::vectorizeLinalgOp()</a>.</p>

</div>
</div>
<a id="ab969c04ac81e03bdc07407d37d03f43b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab969c04ac81e03bdc07407d37d03f43b">&#9670;&nbsp;</a></span>vectorizeContraction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> vectorizeContraction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>newResults</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00364">364</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Builders_8h_source.html#l00392">mlir::OpBuilder::create()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00039">DEBUG_TYPE</a>, <a class="el" href="Vectorization_8cpp_source.html#l00061">Failure</a>, <a class="el" href="Operation_8h_source.html#l00232">mlir::Operation::getOperand()</a>, <a class="el" href="Operation_8h_source.html#l00284">mlir::Operation::getResult()</a>, <a class="el" href="Value_8h_source.html#l00113">mlir::Value::getType()</a>, <a class="el" href="IR_2Builders_8cpp_source.html#l00275">mlir::Builder::getZeroAttr()</a>, <a class="el" href="LinalgInterfaces_8cpp_source.html#l00118">mlir::linalg::isaContractionOpInterface()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00066">NewOp</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00411">mlir::linalg::vectorizeLinalgOp()</a>.</p>

</div>
</div>
<a id="ae980681ab3248e1e537a0d5a5163afaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae980681ab3248e1e537a0d5a5163afaf">&#9670;&nbsp;</a></span>vectorizeLinalgYield()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structVectorizationResult.html">VectorizationResult</a> vectorizeLinalgYield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1BlockAndValueMapping.html">BlockAndValueMapping</a> &amp;&#160;</td>
          <td class="paramname"><em>bvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>newResults</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to vectorize the terminator of a <code>linalgOp</code>. </p>
<p>New result vector values are appended to <code>newResults</code>. Return VectorizationStatus::NoReplace to signal the vectorization algorithm that it should not try to map produced operations and instead return the results using the <code>newResults</code> vector making them available to the vectorization algorithm for RAUW. This function is meant to be used as a CustomVectorizationHook. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00152">152</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="Vectorization_8cpp_source.html#l00106">buildVectorWrite()</a>, <a class="el" href="Matchers_8h_source.html#l00196">mlir::detail::enumerate()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00061">Failure</a>, <a class="el" href="BlockAndValueMapping_8h_source.html#l00070">mlir::BlockAndValueMapping::lookup()</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00063">NoReplace</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>.</p>

</div>
</div>
<a id="a43a69e820c1eb2a75eae1d9e9e0d7065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43a69e820c1eb2a75eae1d9e9e0d7065">&#9670;&nbsp;</a></span>vectorizeOneOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structVectorizationResult.html">VectorizationResult</a> vectorizeOneOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1BlockAndValueMapping.html">BlockAndValueMapping</a> &amp;&#160;</td>
          <td class="paramname"><em>bvm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="Vectorization_8cpp.html#a80cea536835eb713664fff0ab1557d6e">CustomVectorizationHook</a> &gt;&#160;</td>
          <td class="paramname"><em>customVectorizationHooks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic vectorization for a single operation <code>op</code>, given already vectorized operands carried by <code>bvm</code>. </p>
<p>Vectorization occurs as follows:</p><ol type="1">
<li>Try to apply any of the <code>customVectorizationHooks</code> and return its result on success.</li>
<li>Clone any constant in the current scope without vectorization: each consumer of the constant will later determine the shape to which the constant needs to be broadcast to.</li>
<li>Fail on any remaining non <code>ElementwiseMappable</code> op. It is the purpose of the <code>customVectorizationHooks</code> to cover such cases.</li>
<li>Clone <code>op</code> in vector form to a vector of shape prescribed by the first operand of maximal rank. Other operands have smaller rank and are broadcast accordingly. It is assumed this broadcast is always legal, otherwise, it means one of the <code>customVectorizationHooks</code> is incorrect.</li>
</ol>
<p>This function assumes all operands of <code>op</code> have been vectorized and are in the <code>bvm</code> mapping. As a consequence, this function is meant to be called on a topologically-sorted list of ops. This function does not update <code>bvm</code> but returns a VectorizationStatus that instructs the caller what <code>bvm</code> update needs to occur. </p>

<p class="definition">Definition at line <a class="el" href="Vectorization_8cpp_source.html#l00190">190</a> of file <a class="el" href="Vectorization_8cpp_source.html">Vectorization.cpp</a>.</p>

<p class="reference">References <a class="el" href="OperationSupport_8h_source.html#l00447">mlir::OperationState::addAttributes()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00127">broadcastIfNeeded()</a>, <a class="el" href="IR_2Builders_8cpp_source.html#l00462">mlir::OpBuilder::clone()</a>, <a class="el" href="IR_2Builders_8cpp_source.html#l00392">mlir::OpBuilder::createOperation()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00039">DEBUG_TYPE</a>, <a class="el" href="Vectorization_8cpp_source.html#l00061">Failure</a>, <a class="el" href="Operation_8h_source.html#l00316">mlir::Operation::getAttrs()</a>, <a class="el" href="Operation_8h_source.html#l00106">mlir::Operation::getLoc()</a>, <a class="el" href="Operation_8h_source.html#l00057">mlir::Operation::getName()</a>, <a class="el" href="Operation_8h_source.html#l00260">mlir::Operation::getOperands()</a>, <a class="el" href="Operation_8h_source.html#l00305">mlir::Operation::getResultTypes()</a>, <a class="el" href="Operation_8cpp_source.html#l01107">mlir::OpTrait::hasElementwiseMappableTraits()</a>, <a class="el" href="BlockAndValueMapping_8h_source.html#l00070">mlir::BlockAndValueMapping::lookup()</a>, <a class="el" href="Vectorization_8cpp_source.html#l00066">NewOp</a>, and <a class="el" href="Vectorization_8cpp_source.html#l00072">VectorizationResult::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="Vectorization_8cpp_source.html#l00299">vectorizeAsLinalgGeneric()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 8 2021 12:36:30 for MLIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
